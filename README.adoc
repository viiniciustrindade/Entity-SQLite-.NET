= Criando um Sistema Windows Forms com SQLite e Entity Framework 6 (.NET Framework 4.8)

== 1. Introdução
Este documento orienta sobre como criar um sistema Windows Forms em C# .NET Framework 4.8 utilizando SQLite como banco de dados e Entity Framework 6 para gerenciamento dos dados.

== 2. Requisitos
- .NET Framework 4.8 instalado
- Visual Studio 2019 ou 2022
- Pacotes NuGet necessários:
  - `System.Data.SQLite`
  - `EntityFramework`
  - `EntityFramework.Sqlite`

== 3. Criando o Projeto
. Abra o Visual Studio e crie um novo projeto do tipo *Windows Forms App (.NET Framework)*.
. Escolha um nome para o projeto e clique em *Criar*.
. No *Gerenciador de Pacotes NuGet*, instale os pacotes necessários executando os comandos abaixo no *Console do Gerenciador de Pacotes*:

[source,sh]
----
Install-Package System.Data.SQLite
Install-Package EntityFramework
Install-Package EntityFramework.Sqlite
----

== 4. Configurando o Entity Framework 6
No arquivo *App.config*, adicione a seguinte configuração de conexão:

[source,xml]
----
<configuration>
  <connectionStrings>
    <add name="AppDbContext" connectionString="Data Source=clientes.db" providerName="System.Data.SQLite.EF6" />
  </connectionStrings>
</configuration>
----

== 5. Criando o Modelo e o Contexto do Banco
Crie uma pasta chamada *Models* e adicione uma classe `Cliente.cs`:

[source,csharp]
----
using System.ComponentModel.DataAnnotations;

public class Cliente
{
    [Key]
    public int Id { get; set; }
    public string Nome { get; set; }
    public string Email { get; set; }
}
----

Agora, crie a classe `AppDbContext.cs` para gerenciar a conexão com o SQLite:

[source,csharp]
----
using System.Data.Entity;

public class AppDbContext : DbContext
{
    public AppDbContext() : base("name=AppDbContext") {}

    public DbSet<Cliente> Clientes { get; set; }
}
----

== 6. Criando e Aplicando Migrations
O Entity Framework 6 usa *Migrations* para criar e atualizar o banco de dados. No *Console do Gerenciador de Pacotes*, execute:

[source,sh]
----
Enable-Migrations
Add-Migration InitialCreate
Update-Database
----

Isso criará o banco de dados `clientes.db` e aplicará as tabelas.

== 7. Implementando um CRUD Simples
No *Form1*, adicione um *DataGridView*, um *TextBox* para nome e email e três botões (Salvar, Atualizar e Excluir).

=== Salvando um Cliente
[source,csharp]
----
private void btnSalvar_Click(object sender, EventArgs e)
{
    using (var db = new AppDbContext())
    {
        var cliente = new Cliente { Nome = txtNome.Text, Email = txtEmail.Text };
        db.Clientes.Add(cliente);
        db.SaveChanges();
        CarregarDados();
    }
}
----

=== Atualizando um Cliente
[source,csharp]
----
private void btnAtualizar_Click(object sender, EventArgs e)
{
    using (var db = new AppDbContext())
    {
        int id = Convert.ToInt32(txtId.Text);
        var cliente = db.Clientes.Find(id);
        if (cliente != null)
        {
            cliente.Nome = txtNome.Text;
            cliente.Email = txtEmail.Text;
            db.SaveChanges();
            CarregarDados();
        }
    }
}
----

=== Excluindo um Cliente
[source,csharp]
----
private void btnExcluir_Click(object sender, EventArgs e)
{
    using (var db = new AppDbContext())
    {
        int id = Convert.ToInt32(txtId.Text);
        var cliente = db.Clientes.Find(id);
        if (cliente != null)
        {
            db.Clientes.Remove(cliente);
            db.SaveChanges();
            CarregarDados();
        }
    }
}
----

=== Carregar Dados no DataGridView
[source,csharp]
----
private void CarregarDados()
{
    using (var db = new AppDbContext())
    {
        dataGridView1.DataSource = db.Clientes.ToList();
    }
}
----

== 8. Conclusão
Este documento apresentou os passos para configurar um sistema Windows Forms utilizando SQLite e Entity Framework 6 no .NET Framework 4.8. Com isso, você pode expandir as funcionalidades, como adicionar validações, filtros e outras tabelas para enriquecer o sistema.
